and get started there's a sign in sheet going around please just sign your name it just helps us with the pizza so we appreciate if you could just put your name on it I do see some new faces so welcome this is the tools and technology seminar series is a weekly seminar happens this time every week I'm just to discuss tools technologies methodologies that are of interest and relevant to the attendees and the biomedical community so today I'm pleased to present our speaker Adam deal he is a computer research specialist in Alan Boyles lab in the department of computational medicine byron thank you for that intro i'm adam deal again a research computer specialist in Alan Boyles lab and I'm going to talk to you today about the human mouse assist regulatory module browser which is a tool that I developed to analyze and interpret the data related to my primary project which is looking at gene regulatory grammar and how that's evolved between human and mouse so to give you an overview of what what I'll discuss today I'll start by giving you an introduction to grammar and how gene regulation can be thought of as a language oh hope I don't hit that button too much I'll talk to you about two different ways of studying regulatory evolution so positional conservation which is entirely sequence based and grammatical conservation which is more language based and then I'll talk about how we've simplified gene regulatory language by using a machine learning method to combine sets of regulatory instructions that have equivalent meanings into what we call grammatical patterns I'll talk about some of the challenges that we've encountered as we as we've tried to look at the functional properties of these grammatical patterns and then I'll discuss with you the human mouse regulatory module browser that I developed as a tool to address some of these challenges so starting with a brief introduction to the underlying technology before I talk about the three main functions in the module browser the module browser itself compared Maps utility and the extensible search function and there will be some demonstrations involved that and I'll close with a brief summary and discussion of the future directions for this browser so before I move on to my first slide I do want to bring up this quote from a whisper mom talk that was given in a reddit AMA that was done just watching from the last couple of days right so today oh hey well there you go so this is a quote from Elise Feingold who is an NIH program director for encode and it says the Human Genome Project mapped the letters of the human genome but it didn't tell us anything about the grammar where the punctuation is where the starts and ends are that's what encode is trying to do so I thought this was very timely and a very good way to give some context to this project and this browser so so first off what is grammar so the dictionary definition is here grammar is simply a set of structural rules for the composition of clauses phrases and words in any given natural language right so to illustrate this so we've all seen one of these before this is a dictionary it's just a collection of words each of which has its own intrinsic meaning but if we want to take these words and combine them to create more complex statements and phrases and sentences we need a set of rules for how to combine those things or else we'll just end up with a bunch of nonsense so those rules are called grammars and there are many different grammars and when we combine these words with an appropriate grammar we're able to put together an infinite variety of different statements and sentences enough to fill books and libraries you know beyond imagination so put simply though a grammar is a set of rules for combining words to form meaningful statements so here it - this concept is the idea of modularity and there's modularity at two levels and the easiest way to illustrate this is through an example so if I give you two sets of words here and a simple set of grammatical rules for how we can combine these words even give it a very simple sentence we can create a fairly broad array of meaningful statements so to give you one example that will be very familiar to any of you in the room who have done any programming software crashed and the programmers lamented now related to this first level of modularity the first logic level of modularity is at the word level so by swapping out some of these words I can dramatically change the meaning of this sentence to something very different and much sadder so word level modularity means that small changes in word left word usage can dramatically affect the meaning of the sentence the second level of modularity is at the sentence level where this sentence or the a previous sentence means the same thing regardless of when where and by whom it's spoken so it doesn't matter where I stand in the room or if I go to a different room or have somebody else say it it means the same thing so how do we extend this concept to gene regulation well we start with a set of transcription factors that are analogous to words in the dictionary in each of these has its own intrinsic meaning and value as pertains as pertaining to its target gene expression level and we can combine these into more complex regulatory instructions by following a regulatory grammar so I've given you a regulatory grabber here that consists of three fairly simple rules that are actually based on things that we know to be true about gene regulation in the real world and when we combine these we can come up with a pretty broad array of regulatory sentences so I'll go through a few examples the most simple of which is just to take an Express tag and put it upstream of a target gene which gets us to units of expression we can build on that by adding a suppressed tag which completely blocks expression a more tag which gains us an additional unit of expression a less tag which takes away one unit of expression or we can do some more complex things like add Baltimore and a less tag which simply returns us to basal expression so relating this back to the previous example small changes in transcription factor word content can dramatically affect the meaning of the regulatory instruction and the expression of the tark gene furthermore these regulatory sentences mean the same thing regardless of when where and in which cell type they're used and to put this a little bit further you'll notice here that different regulatory sentences can have equivalent meaning so for example genes one and five so there's a level of redundancy that's built into this code and this turns out to be a very useful property that I'm going to come back to so shifting gives a little bit I want to tell you about two differents two different approaches to study regulatory evolution the first of these we call positional conservation it's based on the sort of traditional level or traditional understanding of conservation that most of you will be familiar with where conservation of function is inferred based on sharing of sequences between multiple species so in this figure I've shown these gray bars represent chromosomes in five different species and the black and white bars superimposed on them represent regulatory sequences that have been mapped to each of these species and you'll notice that some of these are unique to one species whereas others are shared between multiple species meaning that there is some form of regulatory sentence that occupies that piece of sequence in all of these species and the underlying assumption based on positional conservation is that these are all serving the same regulatory function and thus having equivalent effects on the expression of the target gene unfortunately several studies have tried to use this mode of conservation and in many cases this is not actually the case and this primarily stems from the fact that transcription factor binding is known to evolve very rapidly between species so individual transcription factor binding sites are created and destroyed over evolutionary time with the net effect that just because there is a regulatory sequence in the same ornithologist location in multiple species it's being used for some regulatory purpose but the specific regulatory purpose that that is serving often changes so there's differences in in each of these species potentially even though they are all serving regulatory function so we have proposed a alternative to dramatic to positional conservation which we call grammatical conservation which instead of looking at the sequence level at shared sequences we're looking at the language or the gene regulatory language level and defining conservation as sharing of regulatory sentences between species no matter where they live in the genome and we're making the assumption here that conserved regulatory sentences serve serve the same function in all species and in all genomic locations so to give you an example here we have two differents two different regulatory surfaces represented upstream of some human and some Mouse genes and you'll see that it they are eliciting the same function in all contexts in both both of these species and so we believe that we can gain significant insight into regulatory evolution and function by comparing these sets of regulatory sentences and how they're used in different species but there's a problem so there are over a roughly around 1,700 transcription factors predicted in mammals and so it would be intractable to investigate the regulatory properties of all of them but if you remember what I mentioned on the previous slide about this level of redundancy that's built into the regulatory code we can make use of that here and simplify the regulatory landscape by making use of machine learning methods to simplify this search space in two sets of equivalent regulatory sentences and we've done exactly that so starting with chip seek data sets for 27 transcription factors in for human and mouse immune cell types with first assembled sis regulatory modules based on mutual overlap of chips chips seek peaks in sequences from these four different cell types and we were left with a little under two hundred and ten thousand individual sister Aguila Tori modules that spanned around eighty one thousand distinct low-side so we took those data and we fed them into a self-organizing map algorithm which we use to infer functional similarity among the elements the underlying hypotheses were that this functional similarity derives from similarity and the transcription factor content of these modules and that the regulatory patterns that we find retain the same function in all species cells and genomic context in which we find them and we were left with 780 grammatical patterns which are represented as individual locations on this graphical map here and each of which can be thought of as a set of regulatory sentences with equivalent meanings so once we have those we wanted to know something about what they were doing and look at their functional annotations both as a way to follow up on these hypotheses to see if they do indeed show evidence of shared functions and also just on a general level to probe functions and see what we can find out about regulatory evolution and function from this so we looked at a bunch of different things and I'm not gonna go through these one by one but you just want to point out here that there's a lot of stuff on this slide and we could quickly run into this situation which will be familiar to most of you in the room where the more types of annotations we added the more difficult the time we had coming up with a coherent story of what's going on so we needed a way to put all the data in context and make them user-friendly so we could actually make some real insights so for this part of the work had already been done in that the package that we that we use to do the self-organizing map already has built into it a way to take annotations and map them back to this graphical som grid so this can be anything from a categorical label that's intrinsic to the patterns themselves or other more continuous properties intrinsic to the patterns such as the number of transcription factors that make up that pattern or it can be external data that we map to the SIS regulatory modules and then in turn map back to the self-organizing map grid such as is shown here with the median log to distance to the nearest transcription start site there I go again so these are a convenient way to view and compare patterns overall properties there are some drawbacks so first of all each one of these has to be had created in our so you have to read in the data produce the map and then potentially do other things to it afterward like resizing and scaling and whatnot to make the thing you know look through what you want it to and this gets quite time-consuming once you've produced those then it's a static image you can't really do very much with except for look at it and say hey that's great but every time you want to add something or change something you have to go back to square one and produce a whole new image once you've done this many times you get a lot of different image files and it's cumbersome to work with them and really tease out any any you know correlations with them and finally these things inherently can only show summary statistics related to the patterns not module level properties so looking at a plot like this we can see that say that pattern right there is composed of modules that are close to transcription start sites but it doesn't tell us anything about what those target genes are what they're doing or if the modules are marked as promoters for instance based on their histone modification profiles or anything like that right so generally these maps raise more questions than answers so we wanted to develop a framework that would help us probe these questions and so I developed the and in doing so I faced several challenges the first of which is just keeping direct track of what data are available so thinking back to that slide a couple you know two slides ago that's a lot of stuff to keep track of second so given that we're looking at a map image and we see something interesting we needed a way to get the data for the individual patterns in a user-friendly and intuitive way we needed a way to facilitate these side-by-side comparisons of map images and we also needed a way to explore more complex relationships with the between the different types of annotations that may be apparent from looking at any single map or even looking at map side-by-side so in order to answer these challenges that the human mouse this regulatory module browser or CRM be and I apologize for the quality of this image but this does features that are designed to answer those specific challenges for instance in terms of data organization the persistent navigational menus and tabbed browsing there's interactive som map images that allow us access to those module level and more detailed pattern level statistics and there are advanced data exploration features such as the compare Maps utility and the extensible search function that help us look at these more complex questions along with integrated help direct links to external resources so we can dig deeper if we so desire and the ability to bookmark and copy/paste URLs to share and save exact data views so that is available let's address it is publicly available I invite all of you to go and try that out your leisure and if you find any bugs or have any suggestions send those to my email address and before I go on to talk more about the functions of the browser itself I want to tell you a bit about technology that I built it from so the browser exists on two linked docker containers so there's a server container that hosts an engine X web server for the front-end requests and there's a catalyst MCV framework that handles the backend requests and the rendering of the actual HTML views that are served to the users browser that sits on top of a MySQL database container that houses the actual data and annotations so the user interface is based on JavaScript and Ajax with CSS based navigation menus and the primary code base is jQuery with some site-specific acts related to the URL persistence and such and the actual som map images are stored in an SVG vector format that allows them to be fully integrated into the UI and completely interactive so this was a fairly low-level ground-up approach which I took because it gave us the flexibility and the power to implement exactly what we wanted in a user interface but it did require some substantial upfront development time so those of you who may be considering some you know similar type of utility for your project will want to keep that in mind and if something that's more of an out-of-the-box solution like shiny for instance might meet your needs you could potentially save a lot of time by using that instead of starting from the ground up as we did but if you do decide that this is the way to go I will mention that there are a lot of online tutorials and online help you resources for all of these tools which really did make it fairly easy for me to get started and build this tool and that we will also once this work is published hopefully very soon be making this browser available as a public github repository and anybody then is welcome to take it it will be publicly licensed so you can take it and spin up your own browser mirror or use it to do whatever you want so there it it's it's not you know there are there are resources available all right moving along so if when you go to this address the first thing you're going to see is the sea RMB homepage and that just has a few simple components here there's a rotating som map image a set of navigational menus and a simple introductory paragraph and from here you can get to any of the three sections that I mentioned the module browser the compare maps utility or the extensible search so the first one of these is the module browser and as you might guess this is the optimal way to explore module level annotations and it has five main components so there's the set of navigational menus I mentioned before there's an integrated help links an interactive som map image a pattern summary table and a set of detailed annotation tabs and while the content of these tabs varies and is tailored to the specific type of content that's that's shown on that tab in general right wrong button there in general you'll find a set of configuration menus and then a set of tables that are sortable in that show pattern level or module level data so rather the talk more about these I'd like to switch over here into an actual browser and give you a demonstration all right so let's zoom out a little bit so you can see things a little better so if you Rhian the browser homepage zoom in a bit more and here's this rotating map image that I mentioned so this refreshes I think every five seconds or something and one thing I didn't mention about this is that this is a fully interactive image so if you hover over any spot on this map it'll tell you what pattern number is it is that you're looking at and one thing that I do often if I'm not sure what I'm looking for or I just want to look for interesting stuff that maybe I haven't noticed before you can watch these rotate and whenever you see something that interests you go ahead and click on that map and it will take you right into the browser with data for the map and pattern that you click done great so if you do know what you want though ahead of time may not be very interesting to you but if you see something maybe you won't see something interesting perfect so maybe you're looking at this one for instance you're like okay well here's a group of red hexagons amid some blue ones you know what does that mean you can click on that and go in and find out more I'll talk a little bit more about the features of the browser here and how you can get more information about the maps themselves and so forth so yes of these self-organizing map arranges these hexagons based on the it's a distance measure between the vector of the vector that it uses to kind of summarize the data this that transcription factor binding data that's associated with that pattern so guns that are closer together are in theory more similar in their transcription factor content and potentially then more similar and function we haven't really done a whole lot in terms of follow up on weather on weather like more patterns that are closer together on the map are serving more similar functions and things that are further away but so it generally that's what that you know kind of topography means does that answer your question well that depends on that depends on which map you're looking at and the specific annotation so let me talk more about what these about the functionality here and how you could actually follow up on that question so let's say you did know what you were looking for here and you were interested in say transcription factors and you wanted to look at a map that showed how ctcf fits into all of this so you can click on ctcf on that transcription factor menu and that first takes you to this place folder page where it just shows the map so if you want to know more about this map at this point you can click about this map it'll bring up a dialog here that tells you exactly what the map shows this one doesn't say very much but this shows the fraction of all Peaks within each pattern so I use peak and module a little interchangeably at this point but when I say peak just think module for now so within each pattern the fraction of all Peaks that have evidence for ctcf binding right so if I switch to a different pattern so let's see one of the ones that would have been alright so here's one of the ones that has the different colors so this tells you what the plot is showing and if you look at the key here so red is here indicating the that that a particular target gene is expressed at a high level in metal cells and mouse Mel cells where blue indicates high expression in Mouse ch 12 cells so it's just like it's a heatmap kind of an arrangement where that color gradation indicates the expression level between those two cell cell lines right okay so you can find that type of information by using this about this map link on any of the browser pages anyway so getting back to demo here so let's say we were interested in that pattern so we can click on that pattern and be taken into the main browser here in theory depending on the number of modules that are in the that are in the pattern it will take sometimes fair bit of time for these to load and that's actually something I'm working on as a future direction to do some kind of incremental loading to speed this up but anyway so once we click on that you'll notice that the pattern that we selected is highlighted here in green so we can keep track of where we're on the map that is as we browse around and over here on the right you'll see there's a summary table that shows pattern level data and this tells the core set of transcription factors that make up that pattern how many factors there are in that core set the number of modules that contribute to the pattern how many came from human how many came from mouse and so forth and the last one I'd like to point out here specifically is the set of cells that are in which that particular grammatical pattern is used and if you want to know more about these codes there is that it does exist in the health sections so if we've if we've taken a look at this and we want to then change out to a different map we can do that simply by going through the menus it swaps out the map but it leaves all the other content in tact with the same pattern selected on the map and this does update the location in the in the address bar in your browser so you can use your back button to navigate back to the view you were looking at before you can cut me paste that you can bookmark it you can send that to a colleague your collaborator so whatever you want so it's easy to reproduce and share these data so I mentioned about let's see I mentioned the about this map link and how you can kind of use that as a tool to learn about the different maps let's say we want to dig deeper into the question I brought up before so we were looking at this plot of median transcription start site distances and I noted here there's a pattern that's close to transcript that contains sis regulatory modules that are close to transcription start sites and we wanted to know more about the histone modifications that those modules carries we'll click on that pattern and it will load up all the data and if we go down here to the tabbed browsing section you'll see there's nine different tabs and two of these are related to histone modifications so there's a histone modification tab and a chromhmm tab so for any of these tabs there is a information button here that you can click and find out more about the content of that tab including what the different tables do and show each of these tabs has a slightly different set of information and a slightly different setup that's tailored to showing the specific type of data that are mapped onto that tab alright so we were interested in histone modifications so we'll take a look at that tab and you see that there is a set of histograms and within each of these histograms this is this is illustrating it's it's just a it's a it's a set of bins from the lowest to highest maximum scores for these different chip seek scores for these different modifications that we're seeing within the module so the number of modules that have a maximum score within each bin is shown on here so the further to the right the bar is the more prevalent that modification is in a particular cell type right so we see just at a glance here that h3k9 is set elation que 79 die methylation and k4 trimethylation are pretty prevalent in these in this in this set if we want to get more detailed we can scroll down a little further and we have some tables that show actual pattern and modern and module level averages and then individual observations here so the first table is pattern wise averages and I will point out here that there are some color codes associated with each cell in the table so the color of the of the cell indicates the species of origin and I actually caught a bug here in this day or in this but purple is our shared measurements that are related to both species red our mouse measurements so this cell here actually should be red but isn't and blue are human measurements and the density of the shading in the cell relates to the range of values that we've observed so the darkest cell is going to represent the maximum value and the latest cell is the minimum value so this gives us a way at a glance to evaluate which things are more prominent in the data set so if we look at this in the averages table you're seeing it looks as if there is a trend toward higher h3k4 trimethylation scores we want to get a little more detailed we can go down here to the CRM level table and you'll see that these are sorted by default by cell and location but these are these are custom sortable so you can click on the header for any column and sort that either in an ascending or descending manner if you want to do multiple columns you can hold down shift and click on column sequentially so let's go ahead and just sort here by h3k4 trimethylation and if we scroll down here we can see that that definitely stands out among all the other columns so as we would expect h3k4 trimethylation which is a histone modification associated with active promoters it does appear to be the most prominent modification we're seeing all right so that gives you an example of one way in which we can follow up on these things that we see out at the out at the pattern level if we want to get into further detail also I should mention here that these locations are clickable and if you click on the location for any one of these modules it'll take you directly into the UCSC genome browser where you can add even more annotations and see what else lives in that particular piece of DNA to follow up you know - any any level of detail you'd like - alright are there any questions on the browser before I move along yeah can you speak louder please I'm sorry so all of those parameters are stored and that in the query string at the end of the base URL so everything kind of after the question mark in here so you can't really see that but all right so all these all these little terms here so it's a it's a key value scheme right here and all these all these values here in the query string after this question mark tell the server exactly what to produce and then serve as an end view at this at this point everything that you do in the browser except for sorting tables is stored in that query string so you can reproduce that exact view yes exactly yeah exactly yeah yeah so yeah nothing is being stored on the server side Oh really on the client side except you know as far as your browser history you know there's no cookies or anything like that that are being generated here it's all done through the URL so I found that to be the most flexible way of approaching this the table sorting so that's done through there's a it's a jQuery add-on that that handles all of that and the only reason that's not stored in that search in that in that query string right now is because I haven't figured out how to hack that in order to have that level of persistence so that's one of the things on my to-do list though because it would be I think very helpful to be able to have a table sorted exactly the way you left it you know when you send that so you don't have to you know send it to somebody and then say and then click on this header and the thing and but that's a work in progress yeah yeah it's just it comes on the on the side of actually how to then take that take that argument and render it into a kind of default sort order right so there's a way of specifying default sort order is on all these different tables but it's a little more difficult to take that from a CGI argument and I have some ideas on how to do it but I just haven't gotten to the point of playing around with it yet so anything else yeah yeah okay I'm scroll down to that standard colors confused basically potentially so standard colors in terms of like following some standard no no so there I mean the red is just pure red the blue is just pure blue the purple is I don't know what exactly yeah yeah I could look at that because it does kind of especially on certain displays kind of washout contrast wise right right I mean that's an issue I have with a lot of these maps too so like for instance I'll show you one map here that was particularly troubling is this map where it's different color code so this actually I did end up using a what's the there's a set of palettes that you can use that are supposed to be like colorblind friendly and such so this is using those colors and hopefully displays to like most people hopefully most people can see all the 15 different shades here but you know I don't know buddy but yes that's a good point all right I'm gonna go ahead and pop back over into the presentation here and keep moving so in the interest of time let's move on here to the next map section if any if there's any other questions on the browser feel free to ask me at the end so the next function I'd like to tell you about is the compare Maps utility and so this gives you the ability to do these side-by-side map comparisons that I alluded to before and the components of that are again navigation menus an integrated help and then there's a set of interchangeable som map images which you can add and remove and swap out at will and each of these is associated with an independent pattern summary table that has a direct link to the browser data as well so let's go ahead and do a quick demo on that as well to show what that's capable of all right so the first thing you're going to see when you go to the compare Maps page is this is this default screen and this has a help link if you click on that it gives you a quick view of how to use this tool and there's a link to a more detailed description down in the full help section but basically what you see here is a menu so you choose a category and you'll note that the same options are available here you see over in the main navigational menus so once you've selected one so let's go ahead and select maps here once you've selected that then the map menu will be populated with all the maps that are available for that particular category so let's go back to our media and TSS distance plot that we were looking for before so recall that we looked at the histone modifications and we saw that there were modifications for that pattern that were consistent with active enhancers excuse me active promoters so let's say we want to know if that's generally true for patterns that are near TSSs so we can add another map here and we're given the same menu and let's check histone modifications here and let's take a look at h3k4 trimethylation as the map type right so that comes up and the deeper shading is corresponding to a higher maximum score for that particular modification and as you can see there is a fairly good correlation between the distance to the transcription start site and that increasing score for h3k4 trimethylation trimethylation so what anytime as we're looking at these if we want to get more information on a given pattern we can click on a location on the map and we'll take we'll get that same pattern summary table that we saw before and the ability to jump over to the browser in a new window that shows you the detailed data associated with that map and pattern and these are independent so you can click on different ones for different maps and it does not change the content for the maps you've already got selected and then at any time if you want to swap out these maps so let's say okay we've looked at trimethylation let's look at a set elation that k9a settle a ssin we can swap that map out all the other data remains intact but it changes the map and we can see okay with nine canine acetylation we also see good correlation let's go ahead and add a third map here and we'll just pick a random one you can do this as many times as we want and add as many maps as we want and let's say we decide we're done with the second map just by clicking remove we can get that get rid of that and then compare these two maps side-by-side so this was actually a fairly simple simply seen seemingly simple tool but it actually had some fairly nagging challenges technologic technologically to get it to work most most mostly related to name spacing between all of these different SVG images so while this wallace tool is fairly simple and I hope fairly intuitive there's actually a fair bit of technology going on underneath the hood so if any of you want to know any more about that feel free to ask me at the end and I'd be happy to walk you through what I did with that but anyway are there any questions on that yes I think I want to be able to compare that exact same cell in the other map but it's kind of hard to figure out where that cell is yeah I don't have to count it well so one thing that helps with that is if you hover over locations on the map it does come up with a tooltip that tells you so you can use that to guide you I do understand what you're saying though and yes that is that is that is that it's kind of yeah you know you still have to kind of hunt for it so yeah and that's that's a great suggestion I hadn't I hadn't really thought about that so much but yes so it would be a fairly simple thing to do to like have a checkbox that you know some set of configuration options and like have a checkbox where you say like link all tables or if your limp link link all maps so it does do that yeah that would be a that would be a great extension to this yeah thank you for that suggestion anything else nope okay let's switch back over here to the presentation then and I'll talk to you about the last functional I'll show you today which is the extensible search so this has two components there's a query input form and a results display so the query input form allows you to construct arbitrarily complex queries directly against the browser database so you're basically putting together an SQL query without having to know any SQL and what joins to perform and you know how and so forth so just by selecting things on menus and maps or menus and text entry fields you can put together a query that will go out and find the exact data that you want to look for these more complex associations so it again has the navigation menus and integrated help we're used to seeing it has a structured search entry form and the ability to add multiple order and grouping conditions so once we've formatted our query here and hit Search it's going to serve that up to the browser and the database is going to run the search for us and then the server will send us back a results display and this visually projects the results onto the som map and gives us detailed data on the pattern and a module level so this has the navigation menus again there's a table that gives us the query parameters exactly as we supplied them and how we how we instructed to combine those terms an interactive map that shows the results count per grammatical pattern and then if we click on any of those cells we can get this same pattern summary table with link up to the browser and down at the bottom there's a sortable table of results so let's go through and run go back to the browser here and we'll run some queries to show you how this works so we start here off on the search entry form and again we have a help link that will take us to a summarized set of instructions on how to use that tool with a direct with a link to more detailed help information the first decision we have to make is whether we're going to search for individual sister egg EULA Tory modules that meet our search criteria or entire grammatical patterns that need to meet those criteria so we'll do one of each of those today but the first one I want to do is a module level search so if you think back to earlier in the talk I showed you how you can select individual maps from these menus and that one of the options is to choose a map that shows the density of individual transcription factors within those grammatical patterns but this only shows us one factor at a time so what if we want to look at multiple factors we can do that so if we select transcription factors as our table here so that will populate the field menu which just basically tells us what columns in the database are available to search against so we'll choose name and let's go with ctcf as our search term here will add another transcription factors name let's say we want to look at the cohesin complex so let's add SMC 3 as our second term that's another member of the cohesin complex and then let's say we want to say look at Mik in association with the cohesin complex so again we'll choose transcription factor name and we'll put Mik in here we can go one further we can add another one they'll become clear why I'm adding so many here in a minute let's say we also want to look at EP 300 so you'll notice that as I added all these rows it gave us an option here on how we want to combine these terms so and is the default so as this is setup right now it's going to look for modules that meet all four of these criteria so we can change any of these to any of the available SQL combination options here so let's say we want to not just look at Mick and EP 3 but Mick or EP 3 that are associating with cohesin so we switched back to or but this doesn't quite do it for us yet because what this is telling it is to look for all three of these terms together and people at EP 300 as a separate term so ctcf SMC and Mick or a p300 which is not really what we want so what we need to do is combine these two terms into a parenthetical group so it will look for ctcf and SMC three and Mick or EP 300 and we can do that by clicking this group with next button or box here which sets a in essence sets a set of parentheses around these two terms so once we've done that we can go ahead and click search and depending on how many rows are in the set results that this can take a minute or two so I've already pre-loaded the results for this on a separate tab so let's just pop right over to that tab and this is what you'll see from this particular search so here's all your query parameters and how they were combined and here's the map that I mentioned that shows how these results excuse me the number of results that map to each individual pattern and you can hover over these to get tooltips it'll tell you the pattern number and the number of results and just to show you here another way of looking at this would have been to use this compare tools or compare Maps utility that we played with before look at all four of these individual maps side-by-side so we can do that and by doing that we can see you know yes there are overlaps here and you could probably you know especially if I add the functionality to like link the selections together you know you can see which individual patterns do overlap but it's much easier to see that given this view in the search result so you can click on any of these so this is the one with the most density let's click on that and see what it is that's pattern 951 it tells you what it is it gives you the ability to jump to the browser and then if you want more detail you can come down here into the table you can again sort this for instance by pattern ID and you can go through and see all the modules that fall within you know that any given pattern any given cell type whatever you want so when we do the for certain types of the annotations yes so when we're looking at gene expression and like the gene set enrichment which I didn't mention but that's one of the the go up that go enrichment stab so those those we do link to a target gene and we just do that simply based on the nearest TSS actually we're using chip and rich to do that and so we're using the target gene calls from chip and rich for the remainder of our analyses so yes good question alright so let's go back and that's actually a good segue into this next search what I want to demonstrate for you guys so let's say we're a researcher that's interested in a particular pathway so for an example I'm going to say the jak-stat pathway and we want to see if we can find modules that target both of the core gene families in that jack and stat right so we're going to use a pattern level query here so we select patterns as the base table and under here for table one of the options is target genes so we'll pick target genes and we have several columns to choose from and target gene is one of them that gets us to the target gene name and we can put Jack we know there are multiple genes in the jack family though and we want to look for any gene in the Jack family not just like Jack one or Jack two so we'll set our comparison as like rather than equal to we also have other options there's greater than not equal to greater than or equal to which you know for some things do make sense and other things don't make sense but this is the one that makes sense for us so we're gonna do that so we'll add another term we'll pick another target gene here target genes target gene and again we don't want a specific step family member we want just step family members in general so we'll do that with like and we can go ahead and click search and this is actually a very fast query because it has a small number of rows that it returns and we see that we do indeed have some patterns that include modules that target both Jack and staff not individual modules that target both genes obviously but there's a module at least one module that targets Jack at least one margin module that targets a stat family gene and we can click on those to find out more about what they are go to the browser if we - and so for and we can see it's like okay what transcription factors appear to be involved and one of the things that I noticed as I was working through this example is actually quite convenient is that two of these patterns these two patterns here not that one these two patterns here actually include EP 300 which when I dug into it a little bit I did find that P 300 is indeed involved in regulating the jak-stat pathway so that was convenient this actually is a good example that you know this it's this this might actually work so I always like finding things like that but anyway that's basically what I wanted to show you as far as the search functionality so if there are any questions on that before I pop back into the presentation this is one of the areas it's very actively under development because there's a lot more that I would like to do with this search I'll talk about that more in a bit but anyway so this is I think the most powerful feature of the browser so putting putting substantial investment of time into getting that better and more extensible anyway so in summary I've shown you today how gene expression can be compared to a language where transcription factors are analogous to words that can be combined into more complex regulatory sentences by following a regulatory grammar so given that a lot of these regulatory sentences have equivalent meanings we can combine them with machine learning methods into grammatical patterns that we can then follow up on and probe their functional properties but this poses several challenges primarily related to data organization and interpretation and so to answer these challenges I've developed the human mouse this regulatory module browser to help interpret these data and so this has a lot of possible applications and the only one of these that I've listed here that I want to specifically call out for today is that we believe that this data has a lot of potential in terms of identifying shared and species specific regulatory logic which may serve to guide translational research so there's obviously a lot of other different things that you can do and you can you know keep adding to this list in your mind but I want to move on here there are future directions because I'm running out of time quickly um so I do want to develop this I do want to develop this browser to be a much more kind of nimble and flexible tool the first one of the short list things that I want to do is to be able to build these images directly from data in the database to greatly decrease my time and put in tailoring all those images specifically but also to allow user customization and the ability for the user to say okay I want to plot with this data you know in order to show exactly you know what you want to see I want to make many improvements to the search function including refinements to the search form that will make it hopefully more user into user-friendly and intuitive because even you know right now you don't have to know any SQL but it's fairly busy and you know there could be a there could be a learning curve involved in using that which I hope to hopefully it won't be so bad in the help functions should help with that but I also would like to add other ways to search such as by gene networks or biological pathways or so forth and particularly to be able to specify what columns you're seeing in the output so right now it's basically just dumping everything from the database to the user display and it's a lot of stuff so most of which most people aren't going to be interested in so that's also a short list thing to give a way to configure the output and possibly even give up visualization options such as what exactly to project onto the map grid you know right now it's the count of results but maybe you want to see like something related to gene expression or you know what have you and possibly other types of views that can show how the data relate to each other and such like a network or a schematic and also to improve the speed there's things I can do on the back end continued refinements to the UI like giving more visualization customization options and it may make sense to incorporate more client-side functionality in doing all of this to give it added level of flex ability so anyway if you could come up with any others I know this is this is quite a list here but I can't think of everything and you know I've gotten one great suggestion today already so if you guys still out and try this out if you come up with any great ideas for things to incorporate please send those to me and I will definitely you know see if that fits into our plan with that I want to acknowledge the members of the Boyle Lab for all their support and help in developing this and acknowledge our funding sources the offered pre sloan foundation NHGRI and NSF and thank you all for coming today and with that doll I open the floor for questions so we we do actually have we've done we've touched on that a little bit so we do have gos data in here so human only because we don't have the data for mouse but we do have some gos in here and this particular pattern doesn't show any enrichments but let's click one over here that does right so you can see this shows some things here about it's very hard to see this and I apologize but this tells some things about the gos categories the actual gos ontology terms and such there's definitely much more that we could do with this but and I haven't figured out a great way other than just showing like the density of the gos results on here to show like deeper you know I'm at least in terms of the som kind of digging deeper into that but yeah that's a great that's a great suggestion particularly I do like the idea of lists of genes because right now like Italy although with my jak-stat example even with two genes it's fairly it's a little bit cumbersome to enter in just even two genes and on the back end actually once you get beyond a certain point so the more genes you have the slower the query becomes because it's more joins that it has to perform and such so yeah so I've got some some kind of engineering work to make something like that possible but that's that's a great suggestion anything else so when you are doing your queries you started to type something another thing that I comment searching is to make sure that you're protecting against sequel injection yes so we are doing that right now on a fairly rudimentary level but yes we are concerned about that yeah yes yeah you know you're absolutely yeah you're absolutely right just just kind of okay so part of that is so I you know it wasn't probably show you a different one here so some of these have like multiple measures mapped to the same cell right so I actually so I did do some I some of these plots I actually added to the base functionality and this our package the ones I did I actually worked in wider wider Keys and one thing that I did do in doing that is give the ability to like supply that key width as an argument to the plotting function but I never actually got to go back and like fix all the ones that were already completed so that's that's the explanation for that I know it's kind of an excuse it's a wishy-washy sort of uh I just didn't have the you know the time to do all that over again after it's like so the process in doing these actually and this is why I really want to move to having these built on the fly because you know then I could then ik then I could have an option it's like at the user say how why do you want that to be where on the plot do you want it to be things like that but from start to finish doing all the plots that are in here takes me about three days in terms of producing and tweaking and resizing so they all look the same in the browser view and so it's a it is you know once you've done it you don't want to have to do it again so alright if that's all thank you guys very much [Music]